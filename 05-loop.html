<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="it" data-bs-theme="auto"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>The Unix Shell: Cicli</title><meta name="viewport" content="width=device-width, initial-scale=1"><script src="assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="assets/styles.css"><script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="favicons/swc/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="favicons/swc/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="favicons/swc/favicon-16x16.png"><link rel="manifest" href="favicons/swc/site.webmanifest"><link rel="mask-icon" href="favicons/swc/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="black"></head><body>
    <header id="top" class="navbar navbar-expand-md top-nav software"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Salta al contenuto principale</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="swc-logo" alt="Software Carpentry" src="assets/images/software-logo.svg"></div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Cambia tema (automatico)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text"><li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul></li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Vista Studente <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/05-loop.html';">Vista Istruttore</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav software" aria-label="Navigazione Principale"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Attiva/Disattiva Navigazione">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Software Carpentry" src="assets/images/software-logo-sm.svg"></div>
    <div class="lesson-title-md">
      The Unix Shell
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Cerca nella pagina Tutto in Uno" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            The Unix Shell
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Punti Chiave</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossario</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Profili degli Studenti</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            Altro <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><li><a class="dropdown-item" href="discuss.html">Discussione</a></li><li><a class="dropdown-item" href="reference.html">Riassunto dei comandi di base</a></li>
          </ul></li>
      </ul></div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Cerca nella pagina Tutto in Uno"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="aio.html" role="button" aria-label="Cerca nella pagina Tutto in Uno">Cerca nella pagina Tutto in Uno</a>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  The Unix Shell
</div>

<aside class="col-md-12 lesson-progress"><div style="width: 48%" class="percentage">
    48%
  </div>
  <div class="progress software">
    <div class="progress-bar software" role="progressbar" style="width: 48%" aria-valuenow="48" aria-label="Progresso della Lezione" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="chiudi menu" alt="chiudi menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Nascondi " data-episodes="Episodi ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text"><li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul></li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Vista Studente
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/05-loop.html">Vista Istruttore</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->

            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODI
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Riepilogo e Configurazione</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="01-intro.html">1. Introduzione alla shell</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="02-filedir.html">2. Navigazione tra file e directory</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="03-create.html">3. Lavorare con i file e le directory</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="04-pipefilter.html">4. Tubi e filtri</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlushcurrent">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-headingcurrent">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapsecurrent" aria-expanded="true" aria-controls="flush-collapsecurrent">
        <span class="visually-hidden">Current Chapter</span>
        <span class="current-chapter">
        5. Cicli
        </span>
      </button>
    </div><!--/div.accordion-header-->

    <div id="flush-collapsecurrent" class="accordion-collapse collapse show" aria-labelledby="flush-headingcurrent" data-bs-parent="#accordionFlushcurrent">
      <div class="accordion-body">
        <ul><li><a href="#pipeline-di-nelle-elaborazione-dei-file">Pipeline di Nelle: Elaborazione dei file</a></li>
        </ul></div><!--/div.accordion-body-->
    </div><!--/div.accordion-collapse-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="06-script.html">6. Script di shell</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="07-find.html">7. Trovare le cose</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RISORSE
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="key-points.html">Punti Chiave</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossario</a>
                      </li>
                      <li>
                        <a href="profiles.html">Profili degli Studenti</a>
                      </li>
                      <li><a href="discuss.html">Discussione</a></li><li><a href="reference.html">Riassunto dei comandi di base</a></li>
                    </ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources"><a href="aio.html">Visualizza tutto in una pagina</a>


            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">

            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="Capitolo Precedente e Successivo"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="04-pipefilter.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Precedente</a>
        <a class="chapter-link float-end" href="06-script.html">Successivo<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="04-pipefilter.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Precedente: Tubi e filtri
        </a>
        <a class="chapter-link float-end" href="06-script.html" rel="next">
          Successivo: Script di shell...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1>Cicli</h1>
        <p>Ultimo aggiornamento il 2025-04-03 |

        <a href="https://github.com/swcarpentry/shell-novice/edit/main/episodes/05-loop.md" class="external-link">Modifica questa pagina <i aria-hidden="true" data-feather="edit"></i></a></p>



        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Espandi Tutte le Soluzioni " data-collapse="Nascondi Tutte le Soluzioni "> Espandi Tutte le Soluzioni <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<div class="overview card">
<h2 class="card-header">Panoramica</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Domande</h3>
<ul><li>Come posso eseguire le stesse azioni su molti file diversi?</li>
</ul></div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Obiettivi</h3>
<ul><li>Scrivere un ciclo che applichi uno o più comandi separatamente a
ciascun file di un insieme di file.</li>
<li>Traccia dei valori assunti da una variabile del ciclo durante la sua
esecuzione.</li>
<li>Spiegare la differenza tra il nome di una variabile e il suo
valore.</li>
<li>Spiegare perché gli spazi e alcuni caratteri di punteggiatura non
dovrebbero essere usati nei nomi dei file.</li>
<li>Dimostrare come vedere quali comandi sono stati eseguiti di
recente.</li>
<li>Eseguire nuovamente i comandi eseguiti di recente senza
riscriverli.</li>
</ul></div>
</div>
</div>
</div>
</div>
<p><strong>I loop</strong> sono un costrutto di programmazione che ci
permette di ripetere un comando o un insieme di comandi per ogni
elemento di un elenco. In quanto tali, sono fondamentali per migliorare
la produttività attraverso l’automazione. Analogamente ai caratteri
jolly e al completamento delle schede, l’uso dei cicli riduce anche la
quantità di battitura necessaria (e quindi il numero di errori di
battitura).</p>
<p>Supponiamo di avere diverse centinaia di file di dati del genoma
denominati <code>basilisk.dat</code>, <code>minotaur.dat</code> e
<code>unicorn.dat</code>. Per questo esempio, utilizzeremo la directory
<code>exercise-data/creatures</code> che contiene solo tre file di
esempio, ma i principi possono essere applicati a molti più file
contemporaneamente.</p>
<p>La struttura di questi file è la stessa: il nome comune, la
classificazione e la data di aggiornamento sono presentati sulle prime
tre righe, con le sequenze di DNA sulle righe successive. Esaminiamo i
file:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> head <span class="at">-n</span> 5 basilisk.dat minotaur.dat unicorn.dat</span></code></pre>
</div>
<p>Vorremmo stampare la classificazione di ogni specie, che è riportata
nella seconda riga di ogni file. Per ogni file, dobbiamo eseguire il
comando <code>head -n 2</code> e inviarlo a <code>tail -n 1</code>. Per
risolvere questo problema utilizzeremo un ciclo, ma prima vediamo la
forma generale di un ciclo, utilizzando lo pseudo-codice seguente:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co"># The word "for" indicates the start of a "For-loop" command</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="cf">for</span> thing <span class="kw">in</span> list_of_things </span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="co">#The word "do" indicates the start of job execution list</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="cf">do</span> </span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>    <span class="co"># Indentation within the loop is not required, but aids legibility</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>    <span class="ex">operation_using/command</span> <span class="va">$thing</span> </span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="co"># The word "done" indicates the end of a loop</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="cf">done</span>  </span></code></pre>
</div>
<p>e possiamo applicarla al nostro esempio in questo modo:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">$</span> for filename in basilisk.dat minotaur.dat unicorn.dat</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="op">&gt;</span>     echo <span class="va">$filename</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="op">&gt;</span>     head <span class="ex">-n</span> 2 <span class="va">$filename</span> <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 1</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>basilisk.dat
CLASSIFICATION: basiliscus vulgaris
minotaur.dat
CLASSIFICATION: bos hominus
unicorn.dat
CLASSIFICATION: equus monoceros</code></pre>
</div>
<div id="seguire-il-prompt" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="seguire-il-prompt" class="callout-inner">
<h3 class="callout-title">Seguire il prompt</h3>
<div class="callout-content">
<p>Il prompt della shell cambia da <code>$</code> a <code>&gt;</code> e
viceversa mentre digitiamo il nostro ciclo. Il secondo prompt,
<code>&gt;</code>, è diverso per ricordarci che non abbiamo ancora
finito di digitare un comando completo. Il punto e virgola,
<code>;</code>, può essere usato per separare due comandi scritti su una
singola riga.</p>
</div>
</div>
</div>
<p>Quando la shell vede la parola chiave <code>for</code>, sa che deve
ripetere un comando (o un gruppo di comandi) una volta per ogni elemento
di un elenco. Ogni volta che il ciclo viene eseguito (chiamato
iterazione), un elemento dell’elenco viene assegnato in sequenza alla
<strong>variabile</strong> e i comandi all’interno del ciclo vengono
eseguiti, prima di passare all’elemento successivo dell’elenco.
All’interno del ciclo, si richiede il valore della variabile anteponendo
<code>$</code>. La <code>$</code> indica all’interprete della shell di
trattare la variabile come un nome di variabile e di sostituire il suo
valore al suo posto, anziché trattarla come un testo o un comando
esterno.</p>
<p>In questo esempio, l’elenco è costituito da tre nomi di file:
<code>basilisk.dat</code>, <code>minotaur.dat</code> e
<code>unicorn.dat</code>. Ogni volta che il ciclo itera, si usa prima
<code>echo</code> per stampare il valore che la variabile
<code>$filename</code> contiene attualmente. Questo non è necessario ai
fini del risultato, ma è utile per seguire più facilmente la procedura.
Successivamente, verrà eseguito il comando <code>head</code> sul file a
cui fa riferimento <code>$filename</code>. La prima volta che viene
eseguito il ciclo, <code>$filename</code> è <code>basilisk.dat</code>.
L’interprete esegue il comando <code>head</code> su
<code>basilisk.dat</code> e trasmette le prime due righe al comando
<code>tail</code>, che stampa la seconda riga di
<code>basilisk.dat</code>. Per la seconda iterazione,
<code>$filename</code> diventa <code>minotaur.dat</code>. Questa volta,
la shell esegue <code>head</code> su <code>minotaur.dat</code> e invia
le prime due righe al comando <code>tail</code>, che stampa la seconda
riga di <code>minotaur.dat</code>. Per la terza iterazione,
<code>$filename</code> diventa <code>unicorn.dat</code>, quindi la shell
esegue il comando <code>head</code> su quel file e <code>tail</code> sul
suo output. Poiché l’elenco era composto da soli tre elementi, la shell
esce dal ciclo <code>for</code>.</p>
<div id="stessi-simboli-significati-diversi" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="stessi-simboli-significati-diversi" class="callout-inner">
<h3 class="callout-title">Stessi simboli, significati diversi</h3>
<div class="callout-content">
<p>Qui vediamo <code>&gt;</code> usato come prompt della shell, mentre
<code>&gt;</code> è usato anche per reindirizzare l’output. Allo stesso
modo, <code>$</code> è usato come prompt della shell, ma, come abbiamo
visto prima, è anche usato per chiedere alla shell di ottenere il valore
di una variabile.</p>
<p>Se la <em>shell</em> stampa <code>&gt;</code> o <code>$</code>,
allora si aspetta che venga digitato qualcosa, e il simbolo è un
prompt.</p>
<p>Se si digita <code>&gt;</code> o <code>$</code>, si tratta di
un’istruzione che indica alla shell di reindirizzare l’output o di
ottenere il valore di una variabile.</p>
</div>
</div>
</div>
<p>Quando si usano le variabili è anche possibile mettere i nomi tra
parentesi graffe per delimitare chiaramente il nome della variabile:
<code>$filename</code> è equivalente a <code>${filename}</code>, ma è
diverso da <code>${file}name</code>. È possibile trovare questa
notazione nei programmi di altre persone.</p>
<p>Abbiamo chiamato la variabile in questo ciclo <code>filename</code>
per rendere il suo scopo più chiaro ai lettori umani. Alla shell stessa
non interessa come viene chiamata la variabile; se scrivessimo questo
ciclo come:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">$</span> for x in basilisk.dat minotaur.dat unicorn.dat</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="op">&gt;</span>     head <span class="ex">-n</span> 2 <span class="va">$x</span> <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 1</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<p>o:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="ex">$</span> for temperature in basilisk.dat minotaur.dat unicorn.dat</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="op">&gt;</span>     head <span class="ex">-n</span> 2 <span class="va">$temperature</span> <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 1</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<p>funzionerebbe esattamente allo stesso modo. *I programmi sono utili
solo se le persone possono capirli, quindi nomi senza senso (come
<code>x</code>) o fuorvianti (come <code>temperature</code>) aumentano
le probabilità che il programma non faccia ciò che i lettori pensano che
faccia.</p>
<p>Negli esempi precedenti, alle variabili (<code>thing</code>,
<code>filename</code>, <code>x</code> e <code>temperature</code>) si
sarebbe potuto dare qualsiasi altro nome, purché significativo sia per
chi scrive il codice sia per chi lo legge.</p>
<p>Si noti anche che i cicli possono essere usati per cose diverse dai
nomi di file, come un elenco di numeri o un sottoinsieme di dati.</p>
<div id="scrivete-il-vostro-ciclo-personale" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="scrivete-il-vostro-ciclo-personale" class="callout-inner">
<h3 class="callout-title">Scrivete il vostro ciclo personale</h3>
<div class="callout-content">
<p>Come si scrive un ciclo che fa l’eco di tutti i 10 numeri da 0 a
9?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Soluzione
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">$</span> for loop_variable in 0 1 2 3 4 5 6 7 8 9</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="op">&gt;</span>     echo <span class="va">$loop_variable</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">0</span></span>
<span><span class="fl">1</span></span>
<span><span class="fl">2</span></span>
<span><span class="fl">3</span></span>
<span><span class="fl">4</span></span>
<span><span class="fl">5</span></span>
<span><span class="fl">6</span></span>
<span><span class="fl">7</span></span>
<span><span class="fl">8</span></span>
<span><span class="fl">9</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="variabili-nei-loop" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="variabili-nei-loop" class="callout-inner">
<h3 class="callout-title">Variabili nei loop</h3>
<div class="callout-content">
<p>Questo esercizio si riferisce alla directory
<code>shell-lesson-data/exercise-data/alkanes</code>. la directory
<code>ls *.pdb</code> fornisce il seguente output:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>cubane.pdb  ethane.pdb  methane.pdb  octane.pdb  pentane.pdb  propane.pdb</code></pre>
</div>
<p>Qual è l’output del seguente codice?</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="ex">$</span> for datafile in <span class="pp">*</span>.pdb</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="op">&gt;</span>     ls <span class="ex">*.pdb</span></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<p>Ora, qual è l’output del seguente codice?</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="ex">$</span> for datafile in <span class="pp">*</span>.pdb</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="op">&gt;</span>     ls <span class="va">$datafile</span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<p>Perché questi due cicli danno risultati diversi?</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Soluzione
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<p>Il primo blocco di codice dà lo stesso risultato a ogni iterazione
del ciclo. Bash espande il carattere jolly <code>*.pdb</code>
all’interno del corpo del ciclo (e anche prima dell’inizio del ciclo) in
modo che corrisponda a tutti i file che terminano con <code>.pdb</code>
e poi li elenca usando <code>ls</code>. Il ciclo espanso avrebbe il
seguente aspetto:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="ex">$</span> for datafile in cubane.pdb  ethane.pdb  methane.pdb  octane.pdb  pentane.pdb  propane.pdb</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="op">&gt;</span>     ls <span class="ex">cubane.pdb</span>  ethane.pdb  methane.pdb  octane.pdb  pentane.pdb  propane.pdb</span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>cubane.pdb  ethane.pdb  methane.pdb  octane.pdb  pentane.pdb  propane.pdb
cubane.pdb  ethane.pdb  methane.pdb  octane.pdb  pentane.pdb  propane.pdb
cubane.pdb  ethane.pdb  methane.pdb  octane.pdb  pentane.pdb  propane.pdb
cubane.pdb  ethane.pdb  methane.pdb  octane.pdb  pentane.pdb  propane.pdb
cubane.pdb  ethane.pdb  methane.pdb  octane.pdb  pentane.pdb  propane.pdb
cubane.pdb  ethane.pdb  methane.pdb  octane.pdb  pentane.pdb  propane.pdb</code></pre>
</div>
<p>Il secondo blocco di codice elenca un file diverso a ogni iterazione
del ciclo. Il valore della variabile <code>datafile</code> viene
valutato con <code>$datafile</code> e poi elencato con
<code>ls</code>.</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">cubane.pdb</span></span>
<span><span class="va">ethane.pdb</span></span>
<span><span class="va">methane.pdb</span></span>
<span><span class="va">octane.pdb</span></span>
<span><span class="va">pentane.pdb</span></span>
<span><span class="va">propane.pdb</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="limitare-gli-insiemi-di-file" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="limitare-gli-insiemi-di-file" class="callout-inner">
<h3 class="callout-title">Limitare gli insiemi di file</h3>
<div class="callout-content">
<p>Quale sarebbe l’output dell’esecuzione del seguente ciclo nella
directory <code>shell-lesson-data/exercise-data/alkanes</code>?</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="ex">$</span> for filename in c<span class="pp">*</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a><span class="op">&gt;</span>     ls <span class="va">$filename</span></span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<ol style="list-style-type: decimal"><li>Non sono elencati file.</li>
<li>Tutti i file sono elencati.</li>
<li>Sono elencati solo <code>cubane.pdb</code>, <code>octane.pdb</code>
e <code>pentane.pdb</code>.</li>
<li>Viene elencato solo <code>cubane.pdb</code>.</li>
</ol></div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">
  Soluzione
  </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<p>4 è la risposta corretta. <code>*</code> corrisponde a zero o più
caratteri, quindi qualsiasi nome di file che inizia con la lettera c,
seguita da zero o più altri caratteri, verrà trovato.</p>
</div>
</div>
</div>
</div>
<div id="limitare-gli-insiemi-di-file" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="limitare-gli-insiemi-di-file" class="callout-inner">
<h3 class="callout-title">Limitare gli insiemi di file<em>
(continued)</em>
</h3>
<div class="callout-content">
<p>In che modo l’output sarebbe diverso se si usasse invece questo
comando?</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="ex">$</span> for filename in <span class="pp">*</span>c<span class="pp">*</span></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a><span class="op">&gt;</span>     ls <span class="va">$filename</span></span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<ol style="list-style-type: decimal"><li>verrebbero elencati gli stessi file.</li>
<li>Questa volta vengono elencati tutti i file.</li>
<li>Questa volta non sono elencati file.</li>
<li>I file <code>cubane.pdb</code> e <code>octane.pdb</code> saranno
elencati.</li>
<li>Verrà elencato solo il file <code>octane.pdb</code>.</li>
</ol></div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4">
  Soluzione
  </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" data-bs-parent="#accordionSolution4" aria-labelledby="headingSolution4">
<div class="accordion-body">
<p>4 è la risposta corretta. <code>*</code> corrisponde a zero o più
caratteri, quindi un nome di file con zero o più caratteri prima di una
lettera c e zero o più caratteri dopo la lettera c sarà corrisposto.</p>
</div>
</div>
</div>
</div>
<div id="salvataggio-su-un-file-in-un-ciclo---prima-parte" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="salvataggio-su-un-file-in-un-ciclo---prima-parte" class="callout-inner">
<h3 class="callout-title">Salvataggio su un file in un ciclo - Prima parte</h3>
<div class="callout-content">
<p>Nella directory <code>shell-lesson-data/exercise-data/alkanes</code>,
qual è l’effetto di questo ciclo?</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="cf">for</span> alkanes <span class="kw">in</span> <span class="pp">*</span>.pdb</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a>    <span class="bu">echo</span> <span class="va">$alkanes</span></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a>    <span class="fu">cat</span> <span class="va">$alkanes</span> <span class="op">&gt;</span> alkanes.pdb</span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a><span class="cf">done</span></span></code></pre>
</div>
<ol style="list-style-type: decimal"><li>Stampa <code>cubane.pdb</code>, <code>ethane.pdb</code>,
<code>methane.pdb</code>, <code>octane.pdb</code>,
<code>pentane.pdb</code> e <code>propane.pdb</code>, e il testo di
<code>propane.pdb</code> sarà salvato in un file chiamato
<code>alkanes.pdb</code>.</li>
<li>stampa <code>cubane.pdb</code>, <code>ethane.pdb</code> e
<code>methane.pdb</code>, e il testo di tutti e tre i file viene
concatenato e salvato in un file chiamato <code>alkanes.pdb</code>.</li>
<li>Stampa <code>cubane.pdb</code>, <code>ethane.pdb</code>,
<code>methane.pdb</code>, <code>octane.pdb</code> e
<code>pentane.pdb</code>, e il testo di <code>propane.pdb</code> sarà
salvato in un file chiamato <code>alkanes.pdb</code>.</li>
<li>Nessuno dei precedenti.</li>
</ol></div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5">
  Soluzione
  </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" data-bs-parent="#accordionSolution5" aria-labelledby="headingSolution5">
<div class="accordion-body">
<ol style="list-style-type: decimal"><li>il testo di ogni file viene scritto a turno nel file
<code>alkanes.pdb</code>. Tuttavia, il file viene sovrascritto a ogni
iterazione del ciclo, quindi il contenuto finale di
<code>alkanes.pdb</code> è il testo del file
<code>propane.pdb</code>.</li>
</ol></div>
</div>
</div>
</div>
<div id="salvataggio-su-un-file-in-un-ciclo---parte-seconda" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="salvataggio-su-un-file-in-un-ciclo---parte-seconda" class="callout-inner">
<h3 class="callout-title">Salvataggio su un file in un ciclo - Parte seconda</h3>
<div class="callout-content">
<p>Sempre nella directory
<code>shell-lesson-data/exercise-data/alkanes</code>, quale sarebbe
l’output del seguente ciclo?</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="cf">for</span> datafile <span class="kw">in</span> <span class="pp">*</span>.pdb</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a>    <span class="fu">cat</span> <span class="va">$datafile</span> <span class="op">&gt;&gt;</span> all.pdb</span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a><span class="cf">done</span></span></code></pre>
</div>
<ol style="list-style-type: decimal"><li>Tutto il testo di <code>cubane.pdb</code>, <code>ethane.pdb</code>,
<code>methane.pdb</code>, <code>octane.pdb</code> e
<code>pentane.pdb</code> verrebbe concatenato e salvato in un file
chiamato <code>all.pdb</code>.</li>
<li>Il testo di <code>ethane.pdb</code> verrà salvato in un file
chiamato <code>all.pdb</code>.</li>
<li>Tutto il testo di <code>cubane.pdb</code>, <code>ethane.pdb</code>,
<code>methane.pdb</code>, <code>octane.pdb</code>,
<code>pentane.pdb</code> e <code>propane.pdb</code> verrebbe concatenato
e salvato in un file chiamato <code>all.pdb</code>.</li>
<li>Tutto il testo di <code>cubane.pdb</code>, <code>ethane.pdb</code>,
<code>methane.pdb</code>, <code>octane.pdb</code>,
<code>pentane.pdb</code> e <code>propane.pdb</code> verrebbe stampato
sullo schermo e salvato in un file chiamato <code>all.pdb</code>.</li>
</ol></div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6">
  Soluzione
  </h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" data-bs-parent="#accordionSolution6" aria-labelledby="headingSolution6">
<div class="accordion-body">
<p>3 è la risposta corretta. <code>&gt;&gt;</code> aggiunge a un file,
invece di sovrascriverlo con l’output rediretto da un comando. Dato che
l’output del comando <code>cat</code> è stato reindirizzato, non viene
stampato nulla sullo schermo.</p>
</div>
</div>
</div>
</div>
<p>Continuiamo con il nostro esempio nella directory
<code>shell-lesson-data/exercise-data/creatures</code>. Ecco un ciclo
leggermente più complicato:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="ex">$</span> for filename in <span class="pp">*</span>.dat</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a><span class="op">&gt;</span>     echo <span class="va">$filename</span></span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a><span class="op">&gt;</span>     head <span class="ex">-n</span> 100 <span class="va">$filename</span> <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 20</span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<p>La shell inizia espandendo <code>*.dat</code> per creare l’elenco dei
file che elaborerà. Il <strong>corpo del ciclo</strong> esegue quindi
due comandi per ciascuno di questi file. Il primo comando,
<code>echo</code>, stampa i suoi argomenti della riga di comando sullo
standard output. Ad esempio:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="ex">$</span> echo hello there</span></code></pre>
</div>
<p>stampa:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>hello there</code></pre>
</div>
<p>In questo caso, poiché la shell espande <code>$filename</code> come
nome di un file, <code>echo $filename</code> stampa il nome del file. Si
noti che non si può scrivere come:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="ex">$</span> for filename in <span class="pp">*</span>.dat</span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a><span class="op">&gt;</span>     <span class="va">$filename</span></span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a><span class="op">&gt;</span>     head <span class="ex">-n</span> 100 <span class="va">$filename</span> <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 20</span>
<span id="cb22-5"><a href="#cb22-5" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<p>perché così la prima volta nel ciclo, quando <code>$filename</code>
si espande in <code>basilisk.dat</code>, la shell cercherebbe di
eseguire <code>basilisk.dat</code> come programma. Infine, la
combinazione <code>head</code> e <code>tail</code> seleziona le righe da
81 a 100 da qualsiasi file venga elaborato (assumendo che il file abbia
almeno 100 righe).</p>
<div id="spazi-nei-nomi" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="spazi-nei-nomi" class="callout-inner">
<h3 class="callout-title">Spazi nei nomi</h3>
<div class="callout-content">
<p>Gli spazi sono usati per separare gli elementi dell’elenco su cui si
vuole eseguire il ciclo. Se uno di questi elementi contiene un carattere
di spazio, dobbiamo circondarlo con le virgolette e fare la stessa cosa
con la nostra variabile loop. Supponiamo che i nostri file di dati si
chiamino:</p>
<pre class="source"><code>red dragon.dat
purple unicorn.dat</code></pre>
<p>Per eseguire il ciclo su questi file, occorre aggiungere i doppi
apici in questo modo:</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="ex">$</span> for filename in <span class="st">"red dragon.dat"</span> <span class="st">"purple unicorn.dat"</span></span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb24-3"><a href="#cb24-3" tabindex="-1"></a><span class="op">&gt;</span>     head <span class="ex">-n</span> 100 <span class="st">"</span><span class="va">$filename</span><span class="st">"</span> <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 20</span>
<span id="cb24-4"><a href="#cb24-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<p>È più semplice evitare di usare spazi (o altri caratteri speciali)
nei nomi dei file.</p>
<p>I file di cui sopra non esistono, quindi se si esegue il codice
precedente, il comando <code>head</code> non sarà in grado di trovarli;
tuttavia, il messaggio di errore restituito mostrerà il nome dei file
che si aspetta:</p>
<div class="codewrapper">
<h3 class="code-label">ERRORE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>head: cannot open ‘red dragon.dat' for reading: No such file or directory
head: cannot open ‘purple unicorn.dat' for reading: No such file or directory</code></pre>
</div>
<p>Provate a rimuovere le virgolette intorno a <code>$filename</code>
nel ciclo precedente per vedere l’effetto delle virgolette sugli spazi.
Si noti che si ottiene un risultato dal comando loop per unicorn.dat
quando si esegue questo codice nella directory
<code>creatures</code>:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>head: cannot open ‘red' for reading: No such file or directory
head: cannot open ‘dragon.dat' for reading: No such file or directory
head: cannot open ‘purple' for reading: No such file or directory
CGGTACCGAA
AAGGGTCGCG
CAAGTGTTCC
...</code></pre>
</div>
</div>
</div>
</div>
<p>Vogliamo modificare ciascuno dei file in
<code>shell-lesson-data/exercise-data/creatures</code>, ma anche salvare
una versione dei file originali. Vogliamo copiare i file originali in
nuovi file chiamati <code>original-basilisk.dat</code> e
<code>original-unicorn.dat</code>, per esempio. Non possiamo usare:</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="ex">$</span> cp <span class="pp">*</span>.dat original-<span class="pp">*</span>.dat</span></code></pre>
</div>
<p>perché si espanderebbe in:</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="ex">$</span> cp basilisk.dat minotaur.dat unicorn.dat original-<span class="pp">*</span>.dat</span></code></pre>
</div>
<p>Questo non avrebbe eseguito il backup dei nostri file, invece si
ottiene un errore:</p>
<div class="codewrapper">
<h3 class="code-label">ERRORE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>cp: target `original-*.dat' is not a directory</code></pre>
</div>
<p>Questo problema si presenta quando <code>cp</code> riceve più di due
input. Quando ciò accade, si aspetta che l’ultimo ingresso sia una
directory in cui copiare tutti i file che gli sono stati passati. Poiché
non esiste una directory denominata <code>original-*.dat</code> nella
directory <code>creatures</code>, si ottiene un errore.</p>
<p>Invece, possiamo usare un ciclo:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="ex">$</span> for filename in <span class="pp">*</span>.dat</span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb30-3"><a href="#cb30-3" tabindex="-1"></a><span class="op">&gt;</span>     cp <span class="va">$filename</span> original-<span class="va">$filename</span></span>
<span id="cb30-4"><a href="#cb30-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<p>Questo ciclo esegue il comando <code>cp</code> una volta per ogni
nome di file. La prima volta, quando <code>$filename</code> si espande a
<code>basilisk.dat</code>, la shell esegue:</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="fu">cp</span> basilisk.dat original-basilisk.dat</span></code></pre>
</div>
<p>La seconda volta, il comando è:</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="fu">cp</span> minotaur.dat original-minotaur.dat</span></code></pre>
</div>
<p>La terza e ultima volta, il comando è:</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="fu">cp</span> unicorn.dat original-unicorn.dat</span></code></pre>
</div>
<p>Poiché il comando <code>cp</code> normalmente non produce alcun
output, è difficile verificare che il ciclo funzioni correttamente.
Tuttavia, abbiamo imparato in precedenza a stampare stringhe usando
<code>echo</code> e possiamo modificare il ciclo per usare
<code>echo</code> per stampare i nostri comandi senza eseguirli.
Possiamo quindi verificare quali comandi verrebbero eseguiti nel ciclo
non modificato.</p>
<p>Il diagramma seguente mostra cosa succede quando viene eseguito il
ciclo modificato e dimostra come l’uso giudizioso di <code>echo</code>
sia una buona tecnica di debug.</p>
<figure><img src="fig/shell_script_for_loop_flow_chart.svg" alt='Il ciclo for "for filename in .dat; do echo cp $filename original-$filename;done" assegnerà successivamente i nomi di tutti i file ".dat" nella directory corrente alla variabile "$filename" e quindi eseguirà il comando. Con i file "basilisk.dat", "minotaur.dat" e "unicorn.dat" nella directory corrente, il ciclo richiamerà successivamente il comando echo tre volte e stamperà tre righe: "cp basislisk.dat original-basilisk.dat", poi "cp minotaur.datoriginal-minotaur.dat" e infine "cp unicorn.datoriginal-unicorn.dat"' class="figure mx-auto d-block"></figure><section><h2 class="section-heading" id="pipeline-di-nelle-elaborazione-dei-file">Pipeline di Nelle: Elaborazione dei file<a class="anchor" aria-label="anchor" href="#pipeline-di-nelle-elaborazione-dei-file"></a></h2>
<hr class="half-width"><p>Nelle è ora pronta a elaborare i suoi file di dati usando
<code>goostats.sh</code> — uno script di shell scritto dal suo
supervisore. Questo calcola alcune statistiche da un file campione di
proteine e prende due argomenti:</p>
<ol style="list-style-type: decimal"><li>un file di ingresso (contenente i dati grezzi)</li>
<li>un file di uscita (per memorizzare le statistiche calcolate)</li>
</ol><p>Poiché sta ancora imparando a usare la shell, decide di costruire i
comandi necessari per gradi. Il primo passo consiste nell’assicurarsi di
poter selezionare i giusti file di input — ricordate, questi sono quelli
i cui nomi terminano in ‘A’ o ‘B’, piuttosto che in ‘Z’. Spostandosi
nella directory <code>north-pacific-gyre</code>, Nelle digita:</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="ex">$</span> cd</span>
<span id="cb34-2"><a href="#cb34-2" tabindex="-1"></a><span class="ex">$</span> cd Desktop/shell-lesson-data/north-pacific-gyre</span>
<span id="cb34-3"><a href="#cb34-3" tabindex="-1"></a><span class="ex">$</span> for datafile in NENE<span class="pp">*</span>A.txt NENE<span class="pp">*</span>B.txt</span>
<span id="cb34-4"><a href="#cb34-4" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb34-5"><a href="#cb34-5" tabindex="-1"></a><span class="op">&gt;</span>     echo <span class="va">$datafile</span></span>
<span id="cb34-6"><a href="#cb34-6" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">NENE01729A.txt</span></span>
<span><span class="va">NENE01736A.txt</span></span>
<span><span class="va">NENE01751A.txt</span></span>
<span></span>
<span><span class="va">...</span></span>
<span><span class="va">NENE02040B.txt</span></span>
<span><span class="va">NENE02043B.txt</span></span></code></pre>
</div>
<p>Il passo successivo è decidere come chiamare i file che il programma
di analisi <code>goostats.sh</code> creerà. Prefissare il nome di ogni
file di input con “stats” sembra semplice, quindi modifica il suo ciclo
per farlo:</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="ex">$</span> for datafile in NENE<span class="pp">*</span>A.txt NENE<span class="pp">*</span>B.txt</span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb36-3"><a href="#cb36-3" tabindex="-1"></a><span class="op">&gt;</span>     echo <span class="va">$datafile</span> stats-<span class="va">$datafile</span></span>
<span id="cb36-4"><a href="#cb36-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>NENE01729A.txt stats-NENE01729A.txt
NENE01736A.txt stats-NENE01729A.txt
NENE01751A.txt stats-NENE01729A.txt
...
NENE02040B.txt stats-NENE02040B.txt
NENE02043B.txt stats-NENE02043B.txt</code></pre>
</div>
<p>Non ha ancora eseguito <code>goostats.sh</code>, ma ora è sicura di
poter selezionare i file giusti e generare i giusti nomi di file di
output.</p>
<p>Digitare più volte i comandi sta diventando noioso e Nelle è
preoccupata di commettere errori, quindi invece di rientrare nel ciclo,
preme <kbd>↑</kbd>. In risposta, la shell ripropone l’intero ciclo su
una riga (usando i punti e virgola per separare i pezzi):</p>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="ex">$</span> for datafile in NENE<span class="pp">*</span>A.txt NENE<span class="pp">*</span>B.txt<span class="kw">;</span> <span class="cf">do</span> <span class="bu">echo</span> <span class="va">$datafile</span> stats-<span class="va">$datafile</span><span class="kw">;</span> <span class="cf">done</span></span></code></pre>
</div>
<p>Utilizzando il comando <kbd>←</kbd>, Nelle passa al comando
<code>echo</code> e lo cambia in <code>bash goostats.sh</code>:</p>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a><span class="ex">$</span> for datafile in NENE<span class="pp">*</span>A.txt NENE<span class="pp">*</span>B.txt<span class="kw">;</span> <span class="cf">do</span> <span class="fu">bash</span> goostats.sh <span class="va">$datafile</span> stats-<span class="va">$datafile</span><span class="kw">;</span> <span class="cf">done</span></span></code></pre>
</div>
<p>quando si preme <kbd>Invio</kbd>, la shell esegue il comando
modificato. Tuttavia, non sembra accadere nulla: non c’è output. Dopo un
attimo, Nelle si rende conto che, poiché il suo script non stampa più
nulla sullo schermo, non ha idea se sia in esecuzione, e tanto meno a
quale velocità. Uccide il comando in esecuzione digitando
<kbd>Ctrl</kbd>+<kbd>C</kbd>, usa <kbd>↑</kbd> per ripetere il comando e
lo modifica in modo da leggere:</p>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a><span class="ex">$</span> for datafile in NENE<span class="pp">*</span>A.txt NENE<span class="pp">*</span>B.txt<span class="kw">;</span> <span class="cf">do</span> <span class="bu">echo</span> <span class="va">$datafile</span><span class="kw">;</span></span>
<span id="cb40-2"><a href="#cb40-2" tabindex="-1"></a><span class="fu">bash</span> goostats.sh <span class="va">$datafile</span> stats-<span class="va">$datafile</span><span class="kw">;</span> <span class="cf">done</span></span></code></pre>
</div>
<div id="inizio-e-fine" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="inizio-e-fine" class="callout-inner">
<h3 class="callout-title">Inizio e fine</h3>
<div class="callout-content">
<p>Possiamo spostarci all’inizio di una riga nella shell digitando
<kbd>Ctrl</kbd>+<kbd>A</kbd> e alla fine usando
<kbd>Ctrl</kbd>+<kbd>E</kbd>.</p>
</div>
</div>
</div>
<p>Quando il programma viene eseguito ora, produce una riga di output
ogni cinque secondi circa:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">NENE01729A.txt</span></span>
<span><span class="va">NENE01736A.txt</span></span>
<span><span class="va">NENE01751A.txt</span></span>
<span><span class="va">...</span></span></code></pre>
</div>
<p>1518 per 5 secondi, diviso per 60, indica che il suo script
impiegherà circa due ore per essere eseguito. Come controllo finale,
apre un’altra finestra di terminale, entra in
<code>north-pacific-gyre</code> e usa
<code>cat stats-NENE01729B.txt</code> per esaminare uno dei file di
output. Sembra tutto a posto, quindi decide di prendere un caffè e di
mettersi in pari con la lettura.</p>
<div id="chi-conosce-la-storia-può-scegliere-di-ripeterla" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="chi-conosce-la-storia-può-scegliere-di-ripeterla" class="callout-inner">
<h3 class="callout-title">Chi conosce la storia può scegliere di ripeterla</h3>
<div class="callout-content">
<p>Un altro modo per ripetere il lavoro precedente è quello di usare il
comando <code>history</code> per ottenere un elenco delle ultime
centinaia di comandi eseguiti, e poi usare <code>!123</code> (dove ‘123’
è sostituito dal numero del comando) per ripetere uno di quei comandi.
Ad esempio, se Nelle digita questo:</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a><span class="ex">$</span> history <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 5</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>456  for datafile in NENE*A.txt NENE*B.txt; do   echo $datafile stats-$datafile; done
457  for datafile in NENE*A.txt NENE*B.txt; do echo $datafile stats-$datafile; done
458  for datafile in NENE*A.txt NENE*B.txt; do bash goostats.sh $datafile stats-$datafile; done
459  for datafile in NENE*A.txt NENE*B.txt; do echo $datafile; bash goostats.sh $datafile
stats-$datafile; done
460  history | tail -n 5</code></pre>
</div>
<p>quindi può eseguire nuovamente <code>goostats.sh</code> sui file
semplicemente digitando <code>!459</code>.</p>
</div>
</div>
</div>
<div id="altri-comandi-della-cronologia" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="altri-comandi-della-cronologia" class="callout-inner">
<h3 class="callout-title">Altri comandi della cronologia</h3>
<div class="callout-content">
<p>Esistono numerosi altri comandi di scelta rapida per accedere alla
cronologia.</p>
<ul><li>
<kbd>Ctrl</kbd>+<kbd>R</kbd> entra in modalità di ricerca nella
cronologia ‘reverse-i-search’ e trova il comando più recente nella
cronologia che corrisponde al testo inserito successivamente. Premere
<kbd>Ctrl</kbd>+<kbd>R</kbd> una o più volte per cercare le
corrispondenze precedenti. È quindi possibile utilizzare i tasti freccia
sinistra e destra per scegliere la riga e modificarla, quindi premere
<kbd>Return</kbd> per eseguire il comando.</li>
<li>
<code>!!</code> recupera il comando immediatamente precedente (si
può trovare o meno più conveniente che usare <kbd>↑</kbd>)</li>
<li>
<code>!$</code> recupera l’ultima parola dell’ultimo comando. Questo
è utile più spesso di quanto ci si possa aspettare: dopo
<code>bash goostats.sh NENE01729B.txt stats-NENE01729B.txt</code>, si
può digitare <code>less !$</code> per guardare il file
<code>stats-NENE01729B.txt</code>, il che è più veloce che fare
<kbd>↑</kbd> e modificare la riga di comando.</li>
</ul></div>
</div>
</div>
<div id="esecuzione-a-secco" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="esecuzione-a-secco" class="callout-inner">
<h3 class="callout-title">Esecuzione a secco</h3>
<div class="callout-content">
<p>Un ciclo è un modo per fare molte cose contemporaneamente — o per
fare molti errori contemporaneamente se fa la cosa sbagliata. Un modo
per verificare cosa farebbe un ciclo è quello di <code>echo</code> i
comandi che eseguirebbe invece di eseguirli effettivamente.</p>
<p>Supponiamo di voler vedere in anteprima i comandi che il seguente
ciclo eseguirà senza eseguirli effettivamente:</p>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb44-1"><a href="#cb44-1" tabindex="-1"></a><span class="ex">$</span> for datafile in <span class="pp">*</span>.pdb</span>
<span id="cb44-2"><a href="#cb44-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb44-3"><a href="#cb44-3" tabindex="-1"></a><span class="op">&gt;</span>     cat <span class="va">$datafile</span> <span class="op">&gt;&gt;</span> all.pdb</span>
<span id="cb44-4"><a href="#cb44-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<p>Qual è la differenza tra i due cicli sottostanti e quale vogliamo
eseguire?</p>
<div class="codewrapper sourceCode" id="cb45">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb45-1"><a href="#cb45-1" tabindex="-1"></a><span class="co"># Version 1</span></span>
<span id="cb45-2"><a href="#cb45-2" tabindex="-1"></a><span class="ex">$</span> for datafile in <span class="pp">*</span>.pdb</span>
<span id="cb45-3"><a href="#cb45-3" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb45-4"><a href="#cb45-4" tabindex="-1"></a><span class="op">&gt;</span>     echo <span class="fu">cat</span> <span class="va">$datafile</span> <span class="op">&gt;&gt;</span> all.pdb</span>
<span id="cb45-5"><a href="#cb45-5" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb46-1"><a href="#cb46-1" tabindex="-1"></a><span class="co"># Version 2</span></span>
<span id="cb46-2"><a href="#cb46-2" tabindex="-1"></a><span class="ex">$</span> for datafile in <span class="pp">*</span>.pdb</span>
<span id="cb46-3"><a href="#cb46-3" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb46-4"><a href="#cb46-4" tabindex="-1"></a><span class="op">&gt;</span>     echo <span class="st">"cat </span><span class="va">$datafile</span><span class="st"> &gt;&gt; all.pdb"</span></span>
<span id="cb46-5"><a href="#cb46-5" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution7" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution7" aria-expanded="false" aria-controls="collapseSolution7">
  <h4 class="accordion-header" id="headingSolution7">
  Soluzione
  </h4>
</button>
<div id="collapseSolution7" class="accordion-collapse collapse" data-bs-parent="#accordionSolution7" aria-labelledby="headingSolution7">
<div class="accordion-body">
<p>la seconda versione è quella che vogliamo eseguire. Questa stampa
sullo schermo tutto ciò che è racchiuso tra le virgolette, espandendo il
nome della variabile del ciclo perché lo abbiamo preceduto da un segno
di dollaro. Inoltre, non modifica e non crea il file
<code>all.pdb</code>, poiché <code>&gt;&gt;</code> viene trattato
letteralmente come parte di una stringa e non come un’istruzione di
reindirizzamento.</p>
<p>La prima versione aggiunge l’output del comando
<code>echo cat $datafile</code> al file <code>all.pdb</code>. Questo
file conterrà solo l’elenco: <code>cat cubane.pdb</code>,
<code>cat ethane.pdb</code>, <code>cat methane.pdb</code> ecc.</p>
<p>provate voi stessi entrambe le versioni per vedere l’output!
Assicurarsi di aprire il file <code>all.pdb</code> per visualizzarne il
contenuto.</p>
</div>
</div>
</div>
</div>
<div id="cicli-annidati" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="cicli-annidati" class="callout-inner">
<h3 class="callout-title">Cicli annidati</h3>
<div class="callout-content">
<p>Supponiamo di voler impostare una struttura di directory per
organizzare alcuni esperimenti di misurazione delle costanti di velocità
di reazione con diversi composti <em>e</em> diverse temperature. Quale
sarebbe il risultato del seguente codice:</p>
<div class="codewrapper sourceCode" id="cb47">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb47-1"><a href="#cb47-1" tabindex="-1"></a><span class="ex">$</span> for species in cubane ethane methane</span>
<span id="cb47-2"><a href="#cb47-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb47-3"><a href="#cb47-3" tabindex="-1"></a><span class="op">&gt;</span>     for <span class="ex">temperature</span> in 25 30 37 40</span>
<span id="cb47-4"><a href="#cb47-4" tabindex="-1"></a><span class="op">&gt;</span>     do</span>
<span id="cb47-5"><a href="#cb47-5" tabindex="-1"></a><span class="op">&gt;</span>         mkdir <span class="va">$species</span><span class="ex">-</span><span class="va">$temperature</span></span>
<span id="cb47-6"><a href="#cb47-6" tabindex="-1"></a><span class="op">&gt;</span>     done</span>
<span id="cb47-7"><a href="#cb47-7" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution8" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution8" aria-expanded="false" aria-controls="collapseSolution8">
  <h4 class="accordion-header" id="headingSolution8">
  Soluzione
  </h4>
</button>
<div id="collapseSolution8" class="accordion-collapse collapse" data-bs-parent="#accordionSolution8" aria-labelledby="headingSolution8">
<div class="accordion-body">
<p>Abbiamo un ciclo annidato, cioè contenuto all’interno di un altro
ciclo, quindi per ogni specie nel ciclo esterno, il ciclo interno (il
ciclo annidato) itera sull’elenco delle temperature e crea una nuova
directory per ogni combinazione.</p>
<p>provate voi stessi a eseguire il codice per vedere quali directory
vengono create!</p>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Punti Chiave</h3>
<div class="callout-content">
<ul><li>Un ciclo <code>for</code> ripete i comandi una volta per ogni cosa
in un elenco.</li>
<li>Ogni ciclo <code>for</code> ha bisogno di una variabile per
riferirsi alla cosa su cui sta operando.</li>
<li>Usare <code>$name</code> per espandere una variabile (cioè per
ottenere il suo valore). si può usare anche <code>${name}</code>.</li>
<li>Non usare spazi, virgolette o caratteri jolly come ‘*’ o ‘?’ nei
nomi dei file, perché complicano l’espansione delle variabili.</li>
<li>Dare ai file nomi coerenti e facili da abbinare con i caratteri
jolly, per facilitarne la selezione per il loop.</li>
<li>Usare il tasto freccia su per scorrere i comandi precedenti e
modificarli e ripeterli.</li>
<li>Usare <kbd>Ctrl</kbd>+<kbd>R</kbd> per cercare tra i comandi
precedentemente inseriti.</li>
<li>Usare <code>history</code> per visualizzare i comandi recenti e
<code>![number]</code> per ripetere un comando per numero.</li>
</ul></div>
</div>
</div>
</section></div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="Capitolo Precedente e Successivo"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="04-pipefilter.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Precedente</a>
        <a class="chapter-link float-end" href="06-script.html">Successivo<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="04-pipefilter.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Precedente: Tubi e filtri
        </a>
        <a class="chapter-link float-end" href="06-script.html" rel="next">
          Successivo: Script di shell...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      		<footer class="row footer mx-md-3"><hr><div class="col-md-6">
        <p>Questa lezione è soggetta al <a href="CODE_OF_CONDUCT.html">Codice di Condotta</a></p>
        <p>

        <a href="https://github.com/swcarpentry/shell-novice/edit/main/episodes/05-loop.md" class="external-link">Modifica su GitHub</a>

	
        | <a href="https://github.com/swcarpentry/shell-novice/blob/main/CONTRIBUTING.md" class="external-link">Contributi</a>
        | <a href="https://github.com/swcarpentry/shell-novice/" class="external-link">Fonte</a></p>
				<p><a href="https://github.com/swcarpentry/shell-novice/blob/main/CITATION" class="external-link">Cita</a> | <a href="mailto:team@carpentries.org">Contatti</a> | <a href="https://carpentries.org/about/" class="external-link">Informazioni</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template concesso in licenza sotto <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> da <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Realizzato con <a href="https://github.com/carpentries/sandpaper/tree/0.16.12" class="external-link">sandpaper (0.16.12)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.9" class="external-link">pegboard (0.7.9)</a> e <a href="https://github.com/carpentries/varnish/tree/1.0.6" class="external-link">varnish (1.0.6)</a></p>
			</div>
		</footer></div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Torna all'inizio"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Indietro</span> Torna all'inizio
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "LearningResource",
  "@id": "https://swcarpentry.github.io/shell-novice/05-loop.html",
  "inLanguage": "it",
  "dct:conformsTo": "https://bioschemas.org/profiles/LearningResource/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "Cicli",
  "creativeWorkStatus": "active",
  "url": "https://swcarpentry.github.io/shell-novice/05-loop.html",
  "identifier": "https://swcarpentry.github.io/shell-novice/05-loop.html",
  "dateCreated": "2014-10-22",
  "dateModified": "2025-04-03",
  "datePublished": "2025-05-06"
}

  </script><script>
		feather.replace();
	</script><!-- Matomo --><script>
          var _paq = window._paq = window._paq || [];
          /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
          _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
          _paq.push(["setDomains", ["*.lessons.carpentries.org","*.datacarpentry.github.io","*.datacarpentry.org","*.librarycarpentry.github.io","*.librarycarpentry.org","*.swcarpentry.github.io", "*.carpentries.github.io"]]);
          _paq.push(["setDoNotTrack", true]);
          _paq.push(["disableCookies"]);
          _paq.push(["trackPageView"]);
          _paq.push(["enableLinkTracking"]);
          (function() {
              var u="https://matomo.carpentries.org/";
              _paq.push(["setTrackerUrl", u+"matomo.php"]);
              _paq.push(["setSiteId", "1"]);
              var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0];
              g.async=true; g.src="https://matomo.carpentries.org/matomo.js"; s.parentNode.insertBefore(g,s);
          })();
        </script><!-- End Matomo Code --></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

